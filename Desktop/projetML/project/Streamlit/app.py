import streamlit as st
import joblib
import numpy as np

# Load the trained model
gbr = joblib.load('model1.pkl')

# App title
st.title("Car Price Prediction App")

# Sidebar for user input
st.sidebar.header("Input Features")
def get_user_input():
    kilometrage = st.sidebar.number_input("Kilométrage (en km)", min_value=0, value=50000)
    annee_modele = st.sidebar.number_input("Année du modèle", min_value=1900, max_value=2025, value=2020)
    marque = st.sidebar.selectbox("Marque", [
        'Renault', 'Dacia', 'Peugeot', 'Volkswagen', 'BMW', 'Fiat'
    ])
    puissance_fiscale = st.sidebar.number_input("Puissance fiscale (en CV)", min_value=1, value=7)
    carburant = st.sidebar.selectbox("Carburant", [
        'Diesel', 'Essence', 'Électrique', 'Hybride', 'LPG'
    ])
    return {
        'kilométrage': kilometrage,
        'année_modèle': annee_modele,
        'marque': marque,
        'puissance_fiscale': puissance_fiscale,
        'carburant': carburant
    }

user_input = get_user_input()

# Display input parameters
st.write("### Input Parameters")
st.json(user_input)

# Convert user input to the format expected by the model
def input_to_one_hot(data):
    # Initialize the target vector with zero values
    enc_input = np.zeros(938)
    # Set the numerical input as they are
    enc_input[0] = data['année_modèle']
    enc_input[1] = data['kilométrage']
    enc_input[2] = data['puissance_fiscale']
    
    ##################### Marque #########################
    marques = [
        'Opel', 'Mercedes', 'Volvo', 'Mini', 'Ford', 'Hyundai', 'Nissan',
        'Land-rover', 'Jeep', 'Volkswagen', 'Peugeot', 'Ds', 'Dacia',
        'Skoda', 'Audi', 'Fiat', 'Citroen', 'Bmw', 'Kia', 'Chery',
        'Renault', 'Toyota', 'Seat', 'Mitsubishi', 'Abarth', 'Ssangyong',
        'Suzuki', 'Alfa-romeo', 'Mazda', 'Honda', 'Zotye', 'Jaguar',
        'Chevrolet', 'Lancia', 'Cupra', 'Changan', 'Gaz', 'Porsche',
        'Smart', 'Autre', 'Mahindra', 'Dfsk', 'Geely', 'Tata', 'Maserati',
        'Foton', 'Infiniti', 'Isuzu', 'Daihatsu', 'Mg', 'Chrysler',
        'Dodge', 'Subaru', 'Great-wall', 'Lifan', 'Simca', 'Hafei',
        'Iveco', 'Lada', 'Lexus', 'Gme', 'Daewoo', 'Rover', 'Cadillac',
        'Hummer', 'Triumph', 'Chana', 'Mercedes-Benz', 'Land Rover', 'BMW',
        'mini', 'Alfa Romeo', 'DS', 'DFSK', 'lancia', 'Autres', '73',
        'Tesla', '77', 'Changhe', '111'
    ]
    cols = ['Année', 'Kilométrage', 'Puissance fiscale', 'Carburant_Diesel', 'Carburant_Electrique', 'Carburant_Essence', 'Carburant_Hybride', 'Carburant_LPG', 'marque_111', 'marque_73', 'marque_77', 'marque_Abarth', 'marque_Alfa Romeo', 'marque_Alfa-romeo', 'marque_Audi', 'marque_Autre', 'marque_Autres', 'marque_BMW', 'marque_Bmw', 'marque_Cadillac', 'marque_Chana', 'marque_Changan', 'marque_Changhe', 'marque_Chery', 'marque_Chevrolet', 'marque_Chrysler', 'marque_Citroen', 'marque_Cupra', 'marque_DFSK', 'marque_DS', 'marque_Dacia', 'marque_Daewoo', 'marque_Daihatsu', 'marque_Dfsk', 'marque_Dodge', 'marque_Ds', 'marque_Fiat', 'marque_Ford', 'marque_Foton', 'marque_Gaz', 'marque_Geely', 'marque_Gme', 'marque_Great-wall', 'marque_Hafei', 'marque_Honda', 'marque_Hummer', 'marque_Hyundai', 'marque_Infiniti', 'marque_Isuzu', 'marque_Iveco', 'marque_Jaguar', 'marque_Jeep', 'marque_Kia', 'marque_Lada', 'marque_Lancia', 'marque_Land Rover', 'marque_Land-rover', 'marque_Lexus', 'marque_Lifan', 'marque_Mahindra', 'marque_Maserati', 'marque_Mazda', 'marque_Mercedes', 'marque_Mercedes-Benz', 'marque_Mg', 'marque_Mini', 'marque_Mitsubishi', 'marque_Nissan', 'marque_Opel', 'marque_Peugeot', 'marque_Porsche', 'marque_Renault', 'marque_Rover', 'marque_Seat', 'marque_Simca', 'marque_Skoda', 'marque_Smart', 'marque_Ssangyong', 'marque_Subaru', 'marque_Suzuki', 'marque_Tata', 'marque_Tesla', 'marque_Toyota', 'marque_Triumph', 'marque_Volkswagen', 'marque_Volvo', 'marque_Zotye', 'marque_lancia', 'marque_mini', 'modèle_1007', 'modèle_106', 'modèle_107', 'modèle_108', 'modèle_1301', 'modèle_1308 gt', 'modèle_146', 'modèle_147', 'modèle_147 gta', 'modèle_156', 'modèle_159', 'modèle_166', 'modèle_180', 'modèle_19', 'modèle_190', 'modèle_1m', 'modèle_2', 'modèle_2 CV', 'modèle_2 cv', 'modèle_200', 'modèle_2008', 'modèle_205', 'modèle_206', 'modèle_206 CC', 'modèle_206 SW', 'modèle_206 cc', 'modèle_206 sw', 'modèle_206+', 'modèle_207', 'modèle_207 cc', 'modèle_207 sw', 'modèle_207d', 'modèle_208', 'modèle_210', 'modèle_220', 'modèle_230', 'modèle_240', 'modèle_250', 'modèle_270', 'modèle_280', 'modèle_3', 'modèle_300', 'modèle_3008', 'modèle_300c', 'modèle_301', 'modèle_305', 'modèle_306', 'modèle_307', 'modèle_307 SW', 'modèle_307 cc', 'modèle_307 sw', 'modèle_308', 'modèle_309', 'modèle_310d', 'modèle_320', 'modèle_323', 'modèle_370z', 'modèle_400', 'modèle_4007', 'modèle_4008', 'modèle_405', 'modèle_406', 'modèle_407', 'modèle_407 coupe', 'modèle_407 sw', 'modèle_4runner', 'modèle_500', 'modèle_5008', 'modèle_500C', 'modèle_500L', 'modèle_500X', 'modèle_500c', 'modèle_500l', 'modèle_500x', 'modèle_504', 'modèle_505', 'modèle_508', 'modèle_508 rxh', 'modèle_595', 'modèle_595 cabriolet', 'modèle_595 competizione 180ch', 'modèle_595 turismo 165ch', 'modèle_6', 'modèle_607', 'modèle_626', 'modèle_695', 'modèle_73', 'modèle_75', 'modèle_80', 'modèle_806', 'modèle_807', 'modèle_A1', 'modèle_A1 sportback', 'modèle_A113', 'modèle_A3', 'modèle_A3 berline', 'modèle_A3 sportback', 'modèle_A4', 'modèle_A4 allroad', 'modèle_A5', 'modèle_A5 coupe', 'modèle_A5 sportback', 'modèle_A6', 'modèle_A7', 'modèle_A8', 'modèle_ADAM', 'modèle_AERIO', 'modèle_ALMERA', 'modèle_ALTEA XL', 'modèle_AX', 'modèle_Accent', 'modèle_Accord', 'modèle_Actyon', 'modèle_Adam', 'modèle_Albea', 'modèle_Alero', 'modèle_Alsvin', 'modèle_Altea', 'modèle_Altea xl', 'modèle_Altima', 'modèle_Alto', 'modèle_Amarok', 'modèle_Amg gts', 'modèle_Ami', 'modèle_Antara', 'modèle_Arkana', 'modèle_Arona', 'modèle_Arteon', 'modèle_Astra', 'modèle_Astro', 'modèle_Ateca', 'modèle_Atos', 'modèle_Auris', 'modèle_Autre', 'modèle_Autres', 'modèle_Avenger', 'modèle_Avensis', 'modèle_Aveo', 'modèle_Ax', 'modèle_Aygo', 'modèle_B max', 'modèle_Benni', 'modèle_Berlingo', 'modèle_Berlingo vul', 'modèle_Bipper', 'modèle_Bora', 'modèle_Boxer', 'modèle_Brabus', 'modèle_Brava', 'modèle_Bravo', 'modèle_C max', 'modèle_C-CROSSER', 'modèle_C-ELYSEE', 'modèle_C-Elysée', 'modèle_C-HR', 'modèle_C-Max', 'modèle_C-elysee', 'modèle_C-hr', 'modèle_C1', 'modèle_C15', 'modèle_C2', 'modèle_C3', 'modèle_C3 Aircross', 'modèle_C3 Cactus', 'modèle_C3 Picasso', 'modèle_C3 aircross', 'modèle_C3 picasso', 'modèle_C30', 'modèle_C31', 'modèle_C4', 'modèle_C4 Aircross', 'modèle_C4 CACTUS', 'modèle_C4 Picasso', 'modèle_C4 cactus', 'modèle_C4 picasso', 'modèle_C4 spacetourer', 'modèle_C4 x', 'modèle_C5', 'modèle_C5 Aircross', 'modèle_C5 aircross', 'modèle_C6', 'modèle_C8', 'modèle_CAMPO', 'modèle_CARNIVAL', 'modèle_CC', 'modèle_CLASSE C COUPE', 'modèle_CLASSE GLK', 'modèle_CLASSE ML', 'modèle_CMP', 'modèle_COCCINELLE', 'modèle_COMBO', 'modèle_CR-V', 'modèle_CRETA', 'modèle_CROMA', 'modèle_CX', 'modèle_CX-9', 'modèle_Cabrio', 'modèle_Cabriolet', 'modèle_Caddy', 'modèle_Caliber', 'modèle_Camaro', 'modèle_Camry', 'modèle_Canter', 'modèle_Captiva', 'modèle_Captur', 'modèle_Caravelle', 'modèle_Carens', 'modèle_Carisma', 'modèle_Carnival', 'modèle_Carry', 'modèle_Cayenne', 'modèle_Cayman', 'modèle_Cc', 'modèle_Ceed', 'modèle_Celerio', 'modèle_Celica', 'modèle_Cerato', 'modèle_Challenger', 'modèle_Cherokee', 'modèle_Citan', 'modèle_City', 'modèle_Civic', 'modèle_Cj5', 'modèle_Ck', 'modèle_Cla', 'modèle_Classe A', 'modèle_Classe B', 'modèle_Classe C', 'modèle_Classe CLA', 'modèle_Classe CLK', 'modèle_Classe CLS', 'modèle_Classe E', 'modèle_Classe GLA', 'modèle_Classe GLC', 'modèle_Classe S', 'modèle_Classe V', 'modèle_Classe a', 'modèle_Classe a berline', 'modèle_Classe b', 'modèle_Classe c', 'modèle_Classe c coupe', 'modèle_Classe e', 'modèle_Classe e coupe', 'modèle_Classe ml', 'modèle_Classe r', 'modèle_Classe s', 'modèle_Classe v', 'modèle_Clc', 'modèle_Clio', 'modèle_Clk', 'modèle_Cls', 'modèle_Clubman', 'modèle_Cmp', 'modèle_Coccinelle', 'modèle_Colt', 'modèle_Combo', 'modèle_Combo life', 'modèle_Compass', 'modèle_Connect', 'modèle_Cooper', 'modèle_Copen', 'modèle_Cordoba', 'modèle_Corolla', 'modèle_Corolla cross', 'modèle_Corolla sport 140', 'modèle_Corolla verso', 'modèle_Corsa', 'modèle_Cougar', 'modèle_Countryman', 'modèle_Coupe', 'modèle_Courrier', 'modèle_Cr-v', 'modèle_Cr-x', 'modèle_Crafter', 'modèle_Creta', 'modèle_Cross country', 'modèle_Crossland', 'modèle_Crossland X', 'modèle_Cruze', 'modèle_Cx-5', 'modèle_Cx7', 'modèle_D-MAX', 'modèle_D-max', 'modèle_DS', 'modèle_DS 3', 'modèle_DS 3 Crossback', 'modèle_DS 4', 'modèle_DS 5', 'modèle_DS 7 Crossback', 'modèle_DS7', 'modèle_Daily', 'modèle_Defender', 'modèle_Delta', 'modèle_Discovery', 'modèle_Discovery Sport', 'modèle_Discovery sport', 'modèle_Doblo', 'modèle_Dokker', 'modèle_Dokker Van', 'modèle_Dokker van', 'modèle_Ds', 'modèle_Ds3', 'modèle_Ds4', 'modèle_Ds4 crossback', 'modèle_Ds5', 'modèle_Ds7 crossback', 'modèle_Ducato', 'modèle_Ducato campervan', 'modèle_Duster', 'modèle_E-PACE', 'modèle_E-pace', 'modèle_EXPRESS', 'modèle_Eastar', 'modèle_Ecosport', 'modèle_Elantra', 'modèle_Eos', 'modèle_Es', 'modèle_Escalade', 'modèle_Escort', 'modèle_Espace', 'modèle_Evalia', 'modèle_Ex35', 'modèle_Exeo', 'modèle_Expert', 'modèle_Explorer', 'modèle_Express', 'modèle_Express van', 'modèle_F-150', 'modèle_F-PACE', 'modèle_F-pace', 'modèle_FIORINO', 'modèle_FOCUS C-MAX', 'modèle_FREEMONT', 'modèle_Fabia', 'modèle_Fc', 'modèle_Fiesta', 'modèle_Fiorino', 'modèle_Fj cruiser', 'modèle_Florid cross', 'modèle_Fluence', 'modèle_Focus', 'modèle_Focus 4p', 'modèle_Focus 5p', 'modèle_Focus c-max', 'modèle_ForTwo', 'modèle_Forfour', 'modèle_Forland', 'modèle_Formentor', 'modèle_Fortuner', 'modèle_Fortwo', 'modèle_Fox', 'modèle_Freelander', 'modèle_Freemont', 'modèle_Fullback', 'modèle_Fusion', 'modèle_Fx35', 'modèle_G37', 'modèle_GIULIA', 'modèle_GK-GT', 'modèle_GOLF 2', 'modèle_GOLF 3', 'modèle_GOLF 4', 'modèle_GOLF 5', 'modèle_GOLF 6', 'modèle_GOLF 7', 'modèle_GOLF 8', 'modèle_GOLF PLUS', 'modèle_GRANDE PUNTO', 'modèle_Galaxy', 'modèle_Galloper', 'modèle_Genesis', 'modèle_Ghibli', 'modèle_Giulia', 'modèle_Giulietta', 'modèle_Gla', 'modèle_Glc', 'modèle_Gle', 'modèle_Gle coupe', 'modèle_Glk', 'modèle_Glory 580', 'modèle_Glory ix5', 'modèle_Gol', 'modèle_Golf', 'modèle_Golf 1', 'modèle_Golf 2', 'modèle_Golf 3', 'modèle_Golf 4', 'modèle_Golf 5', 'modèle_Golf 6', 'modèle_Golf 7', 'modèle_Golf 8', 'modèle_Golf plus', 'modèle_Grand Cherokee', 'modèle_Grand Vitara', 'modèle_Grand c4 picasso', 'modèle_Grand cherokee', 'modèle_Grand i10', 'modèle_Grand santa fe', 'modèle_Grand scenic', 'modèle_Grand vitara', 'modèle_Grand voyager', 'modèle_Grande punto', 'modèle_Grandis', 'modèle_Grandland', 'modèle_Grandland X', 'modèle_Gt', 'modèle_H-1', 'modèle_H-100', 'modèle_H1', 'modèle_H100', 'modèle_H3', 'modèle_H350', 'modèle_Haval', 'modèle_Hilux', 'modèle_Hover', 'modèle_Hr-v', 'modèle_I10', 'modèle_I20', 'modèle_I30', 'modèle_I40', 'modèle_Ibiza', 'modèle_Id.3', 'modèle_Ideal', 'modèle_Ignis', 'modèle_Insight', 'modèle_Insignia', 'modèle_Ioniq', 'modèle_Ioniq Hybrid', 'modèle_Ix35', 'modèle_Ix55', 'modèle_J5', 'modèle_JIMNY', 'modèle_Jazz', 'modèle_Jetta', 'modèle_Jimny', 'modèle_Juke', 'modèle_Jumper', 'modèle_Jumpy', 'modèle_K01h', 'modèle_K01l', 'modèle_K01s', 'modèle_K2700', 'modèle_K5', 'modèle_KADETT', 'modèle_KUBISTAR', 'modèle_Ka', 'modèle_Kadjar', 'modèle_Kamiq', 'modèle_Kangoo', 'modèle_Karman', 'modèle_Karoq', 'modèle_Kodiaq', 'modèle_Koleos', 'modèle_Kona', 'modèle_Korando', 'modèle_Kuga', 'modèle_Kuv 100', 'modèle_Kyron', 'modèle_L200', 'modèle_L300', 'modèle_LIANA', 'modèle_Labo', 'modèle_Laguna', 'modèle_Laguna coupe', 'modèle_Laguna estate', 'modèle_Lancer', 'modèle_Land cruiser', 'modèle_Landtrek', 'modèle_Lanos', 'modèle_Latitude', 'modèle_Legacy', 'modèle_Legend', 'modèle_Leon', 'modèle_Leon st', 'modèle_Levante', 'modèle_Linea', 'modèle_Lodgy', 'modèle_Logan', 'modèle_Logan Mcv', 'modèle_Logan mcv', 'modèle_Ls', 'modèle_M151 mutt', 'modèle_M3', 'modèle_M5', 'modèle_MOKKA', 'modèle_MX6', 'modèle_Macan', 'modèle_Macan turbo', 'modèle_Marea', 'modèle_Maruti', 'modèle_Master', 'modèle_Matrix', 'modèle_Megane', 'modèle_Megane 3', 'modèle_Megane 4', 'modèle_Megane Coupe', 'modèle_Megane Sedan', 'modèle_Megane estate', 'modèle_Megane sedan', 'modèle_Meriva', 'modèle_Mg 3', 'modèle_Micra', 'modèle_Mini', 'modèle_Minyi', 'modèle_Mito', 'modèle_Model 3', 'modèle_Modus', 'modèle_Mohave', 'modèle_Mokka', 'modèle_Mokka x', 'modèle_Mondeo', 'modèle_Movano', 'modèle_Mpv', 'modèle_Murano', 'modèle_Mustang', 'modèle_Mx3', 'modèle_Mx5', 'modèle_NOTE', 'modèle_Navara', 'modèle_Nemo', 'modèle_Nevada', 'modèle_New beetle', 'modèle_New golf', 'modèle_Nexia', 'modèle_Next', 'modèle_Next van', 'modèle_Niro', 'modèle_Nomad', 'modèle_Nomad ii', 'modèle_Note', 'modèle_Octavia', 'modèle_Omega', 'modèle_One', 'modèle_Opirus', 'modèle_Optima', 'modèle_Optra', 'modèle_Orlando', 'modèle_Outlander', 'modèle_PASSAT CC', 'modèle_PATROL', 'modèle_PT Cruiser', 'modèle_Paceman', 'modèle_Pajero', 'modèle_Pajero sport', 'modèle_Palio', 'modèle_Panamera', 'modèle_Panda', 'modèle_Partner', 'modèle_Partner tepee', 'modèle_Passat', 'modèle_Passat cc', 'modèle_Pathfinder', 'modèle_Patriot', 'modèle_Patrol', 'modèle_Picanto', 'modèle_Pick up', 'modèle_Pick-up', 'modèle_Pickup', 'modèle_Pik-up', 'modèle_Polo', 'modèle_Prado', 'modèle_Premacy', 'modèle_Primera', 'modèle_Prius', 'modèle_Proceed', 'modèle_Punto', 'modèle_Q2', 'modèle_Q3', 'modèle_Q3 sportback', 'modèle_Q5', 'modèle_Q5 sportback', 'modèle_Q7', 'modèle_Q8', 'modèle_QQ', 'modèle_QQ6', 'modèle_Qashqai', 'modèle_Qq', 'modèle_Quattroporte', 'modèle_Qx56', 'modèle_R11', 'modèle_R18', 'modèle_R19', 'modèle_R25', 'modèle_R4', 'modèle_R5', 'modèle_R9', 'modèle_RAV 4', 'modèle_RCZ', 'modèle_RS3', 'modèle_Range Rover', 'modèle_Range Rover Evoque', 'modèle_Range Rover Sport', 'modèle_Range rover', 'modèle_Range rover evoque', 'modèle_Range rover sport', 'modèle_Range rover velar', 'modèle_Range rover vogue', 'modèle_Ranger', 'modèle_Rapid', 'modèle_Rascal', 'modèle_Rav-4', 'modèle_Rcz', 'modèle_Renegade', 'modèle_Rexton', 'modèle_Rifter', 'modèle_Rio', 'modèle_Rogue', 'modèle_Roomster', 'modèle_Rs-q3', 'modèle_Rs3', 'modèle_Rs5', 'modèle_S-max', 'modèle_S3', 'modèle_S40', 'modèle_S5', 'modèle_S6', 'modèle_S60', 'modèle_S80', 'modèle_S90', 'modèle_SHARAN', 'modèle_SONATA', 'modèle_STARLET', 'modèle_STAVIC', 'modèle_Samsung sm3', 'modèle_Samurai', 'modèle_Sandero', 'modèle_Sandero stepway', 'modèle_Santa Fe', 'modèle_Santa fe', 'modèle_Saxo', 'modèle_Scala', 'modèle_Scenic', 'modèle_Scirocco', 'modèle_Scudo', 'modèle_Seltos', 'modèle_Serie 1', 'modèle_Serie 2', 'modèle_Serie 2 coupé', 'modèle_Serie 2 gran coupe', 'modèle_Serie 200', 'modèle_Serie 3', 'modèle_Serie 3 coupé', 'modèle_Serie 4', 'modèle_Serie 4 cabriolet', 'modèle_Serie 4 coupé', 'modèle_Serie 4 gran coupe', 'modèle_Serie 4 gran coupé', 'modèle_Serie 400', 'modèle_Serie 5', 'modèle_Serie 5 GT', 'modèle_Serie 5 gt', 'modèle_Serie 6', 'modèle_Serie 600', 'modèle_Serie 7', 'modèle_Serie 8', 'modèle_Series iia lightweight', 'modèle_Sharan', 'modèle_Siena', 'modèle_Sierra', 'modèle_Sirion', 'modèle_Slc', 'modèle_Slk', 'modèle_Sls', 'modèle_Sonata', 'modèle_Sonet', 'modèle_Sorento', 'modèle_Soul', 'modèle_Spacetourer', 'modèle_Spark', 'modèle_Splash', 'modèle_Sportage', 'modèle_Sportero', 'modèle_Sprinter', 'modèle_Sq5', 'modèle_Starlet', 'modèle_Stavic', 'modèle_Stelvio', 'modèle_Stilo', 'modèle_Sunny', 'modèle_Super 5', 'modèle_Super ace', 'modèle_Super cab', 'modèle_Superb', 'modèle_Swift', 'modèle_Sx-4', 'modèle_Symbol', 'modèle_T-roc', 'modèle_TERRACAN', 'modèle_TIPO', 'modèle_TRAJET', 'modèle_Taigo', 'modèle_Talisman', 'modèle_Tarraco', 'modèle_Tepee', 'modèle_Tercel', 'modèle_Terios', 'modèle_Terracan', 'modèle_Terrano', 'modèle_Thema', 'modèle_Thing', 'modèle_Tiggo', 'modèle_Tiggo 2 pro', 'modèle_Tiggo 4 pro', 'modèle_Tiggo 7 pro', 'modèle_Tiguan', 'modèle_Tiida', 'modèle_Tipo', 'modèle_Tipo hatchback', 'modèle_Tm', 'modèle_Toledo', 'modèle_Touareg', 'modèle_Touran', 'modèle_Tourneo connect', 'modèle_Tourneo custom', 'modèle_Tr-5', 'modèle_Trafic', 'modèle_Trajet', 'modèle_Transit', 'modèle_Transporter', 'modèle_Trax', 'modèle_Tribeca', 'modèle_Tt', 'modèle_Tts', 'modèle_Tucson', 'modèle_Twingo', 'modèle_Type s', 'modèle_Type x', 'modèle_Ulysse', 'modèle_Uno', 'modèle_V40', 'modèle_V40 Cross Country', 'modèle_V525', 'modèle_VERSO', 'modèle_VIVARO', 'modèle_Vectra', 'modèle_Velar', 'modèle_Vento', 'modèle_Veracruz', 'modèle_Verso', 'modèle_Viano', 'modèle_Vitara', 'modèle_Vito', 'modèle_WAGON R', 'modèle_Wagon r', 'modèle_Wrangler', 'modèle_X trail', 'modèle_X-Trail', 'modèle_X-Type', 'modèle_X1', 'modèle_X2', 'modèle_X3', 'modèle_X4', 'modèle_X5', 'modèle_X6', 'modèle_XC40', 'modèle_XC60', 'modèle_XC90', 'modèle_XE', 'modèle_XF', 'modèle_XJ', 'modèle_XSARA', 'modèle_Xc40', 'modèle_Xc60', 'modèle_Xc90', 'modèle_Xe', 'modèle_Xf', 'modèle_Xj', 'modèle_Xjl', 'modèle_Xk', 'modèle_Xsara', 'modèle_Xsara picasso', 'modèle_YRV', 'modèle_Yaris', 'modèle_Yaris cross', 'modèle_Yeti', 'modèle_Ypsilon', 'modèle_Yrv', 'modèle_Z4', 'modèle_Zafira', 'modèle_Zoe', 'modèle_Zs', 'modèle_Zx', 'modèle_a3_sportback', 'modèle_a5_sportback', 'modèle_adam_rocks', 'modèle_amg_glc', 'modèle_amggtroadster', 'modèle_arkana', 'modèle_bayon', 'modèle_boxster_s', 'modèle_c4x', 'modèle_canter', 'modèle_civic_berline', 'modèle_civic_coupe', 'modèle_classe_cla_amg', 'modèle_classe_e_coupe', 'modèle_cooper', 'modèle_corolla_cross', 'modèle_corolla_millenium', 'modèle_corolla_prestige', 'modèle_corolla_sport', 'modèle_country man', 'modèle_doblo_panorama', 'modèle_ds4_crossback', 'modèle_express_van', 'modèle_fortuner', 'modèle_fusion_berline', 'modèle_gloryix5', 'modèle_grand_santa_fe', 'modèle_hatch', 'modèle_i 10', 'modèle_i 20', 'modèle_i 30', 'modèle_id3', 'modèle_ix 35', 'modèle_kuv_100', 'modèle_lancer', 'modèle_land_cruiser_prado', 'modèle_landtrek', 'modèle_megane_4', 'modèle_mustang_cabriolet', 'modèle_one', 'modèle_outlander', 'modèle_pajero', 'modèle_pajero sport', 'modèle_panamera_sport_turismo', 'modèle_pick up', 'modèle_primera', 'modèle_punto_classic', 'modèle_q3_sportback', 'modèle_q5_sportback', 'modèle_range_rover_velar', 'modèle_range_rover_vogue', 'modèle_sandero_stepway', 'modèle_sandero_streetway', 'modèle_seres_3', 'modèle_serie_1_coupe', 'modèle_serie_3_cabriolet', 'modèle_sonet', 'modèle_sq5', 'modèle_t-roc', 'modèle_tarraco', 'modèle_thema', 'modèle_tipo_hatchback', 'modèle_tonale', 'modèle_tourneo_connect', 'modèle_v60', 'modèle_x6m', 'modèle_xenon']

    redefinded_user_input = 'marque_' + data['marque']
    marque_index = cols.index(redefinded_user_input)
    enc_input[marque_index] = 1
    
    ##################### Carburant ####################
    carburants = ['Diesel', 'Essence', 'Électrique', 'Hybride', 'LPG']
    redefinded_user_input = 'Carburant_' + data['carburant']
    carburant_index = cols.index(redefinded_user_input)
    enc_input[carburant_index] = 1
    
    return enc_input
# Prediction
if st.button("Predict Price"):
    input_data = input_to_one_hot(user_input)
    prediction = gbr.predict([input_data])[0]
    st.write(f"### Predicted Price: {round(prediction, 2)} DH")